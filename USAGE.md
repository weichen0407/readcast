# 使用指南

## 快速开始

### 1. 启动服务

**终端 1 - 启动后端：**
```bash
cd backend
npm run dev
```
后端将在 `http://localhost:3001` 运行

**终端 2 - 启动前端：**
```bash
cd frontend
npm run dev
```
前端将在 `http://localhost:3000` 运行

### 2. 访问应用

打开浏览器访问：`http://localhost:3000`

---

## 功能使用说明

### 📰 获取新闻

1. **在首页找到"获取新闻"区域**
2. **选择分类**：全部、体育、政治、科技、商业
3. **点击"获取新闻"按钮**
4. 系统会从 The Guardian API 获取最新新闻
5. 点击"保存文章"可以将新闻保存到数据库
6. 点击"查看"可以阅读文章

### 📖 阅读文章

#### 基本操作

1. **查看文章列表**：首页显示所有已保存的文章
2. **点击文章标题**：进入文章阅读页面

#### 文章阅读页面功能

**顶部操作栏：**
- **总结文章**：一键总结整篇文章（使用 Summary Agent）
- **提取关键词**：提取文章关键词（使用 Keyword Agent）
- **收藏文章**：收藏整篇文章

**文章内容区域（左侧）：**
- **双击单词**：选中单个单词，会弹出词典查询窗口
- **拖拽选择**：鼠标拖拽选择句子或段落
- **选中文本**：选中的内容会实时显示在右侧面板

**右侧面板功能：**

1. **选中内容显示**：
   - 选中的文本会显示在可编辑文本框中
   - 可以手动编辑选中的内容

2. **Agent功能按钮**：
   - **翻译**：将选中文本翻译成中文
   - **解释**：结合文章上下文解释选中文本
   - **故事线**：分析文本中的故事线和人物关系
   - **情感分析**：分析文本的情感倾向
   - **提取实体**：提取人物、地点、组织等实体
   - **上下文理解**：结合关键词和全文理解上下文

3. **结果展示**：
   - 每个Agent的结果会显示在下方
   - 可以查看多个Agent的分析结果
   - 可以删除不需要的结果

4. **收藏功能**：
   - 点击"⭐ 收藏这句话"按钮
   - 会收藏选中的句子和对应的AI解释

### 🔍 单词查询

1. **双击文章中的任意单词**
2. 弹出窗口显示：
   - 单词释义
   - 音标
   - 读音播放按钮
   - 不同词性的解释
   - 例句

### ⭐ 收藏功能

#### 收藏文章
- 在文章页面点击"收藏文章"按钮
- 在首页点击"⭐ 我的收藏"查看收藏的文章

#### 收藏句子
- 选择文本后，在右侧面板点击"⭐ 收藏这句话"
- 访问 `/favorites/sentences` 查看所有收藏的句子
- 每个收藏包含：句子、AI解释、来源文章

### 🤖 LangChain Agents 使用

#### 文章级别Agents

**总结文章（Summary Agent）**
- 点击"总结文章"按钮
- 获取整篇文章的摘要

**提取关键词（Keyword Agent）**
- 点击"提取关键词"按钮
- 获取文章的关键词和分类
- 关键词会用于优化后续的Context Agent

#### 文本级别Agents

在右侧面板选择文本后，可以使用以下Agents：

1. **翻译（Translation Agent）**
   - 将英文翻译成中文
   - 考虑文章上下文

2. **解释（Explanation Agent）**
   - 详细解释文本含义
   - 包括专业术语、文化背景

3. **故事线（Storyline Agent）**
   - 分析故事线和背景
   - 识别人物关系（如"特朗普和马斯克"）
   - 返回关系图谱

4. **情感分析（Sentiment Agent）**
   - 分析文本情感倾向
   - 返回：positive/negative/neutral
   - 提供情感分数和解释

5. **提取实体（Entity Agent）**
   - 提取人物、组织、地点、事件
   - 返回结构化实体列表

6. **上下文理解（Context Agent）**
   - 结合文章关键词和全文
   - 提供深度上下文理解
   - 说明文本在文章中的重要性

---

## 使用示例

### 示例1：阅读体育新闻

1. 在首页选择"体育"分类
2. 点击"获取新闻"
3. 选择一篇NBA新闻，点击"保存文章"
4. 进入文章阅读页面
5. 点击"总结文章"了解文章大意
6. 点击"提取关键词"获取关键信息
7. 选择一段包含专业术语的文本
8. 在右侧面板点击"解释"按钮
9. 查看AI对专业术语的解释
10. 点击"收藏这句话"保存重要内容

### 示例2：分析政治新闻

1. 获取一篇政治新闻
2. 选择包含人物关系的段落
3. 点击"故事线"按钮
4. 查看人物关系分析
5. 点击"提取实体"查看所有提到的人物和组织
6. 选择关键句子，点击"上下文理解"
7. 查看该句子在全文中的重要性

### 示例3：学习英语单词

1. 阅读文章时，双击不认识的单词
2. 查看词典解释和读音
3. 选择包含该单词的句子
4. 点击"解释"查看句子含义
5. 点击"翻译"查看中文翻译
6. 收藏这个句子和解释，方便复习

---

## 高级功能

### LangChain 1.0 特性演示

项目展示了以下LangChain 1.0特性：

1. **Chains（链式处理）**
   - 关键词提取 → 总结 → 故事线分析
   - 通过 `/api/agents/process-with-chain/:id` 调用

2. **Tools（工具）**
   - ArticleRetrievalTool：文章检索工具
   - KeywordLookupTool：关键词查询工具

3. **Memory（记忆）**
   - 会话记忆功能
   - 保持上下文对话

4. **Agent Workflow（工作流）**
   - 通过 `/api/agents/workflow/:id` 调用
   - 支持自定义任务执行

---

## 常见问题

### Q: 新闻获取失败？
A: 检查网络连接，The Guardian API 需要能访问外网。如果失败，可以手动输入文章URL或文本。

### Q: Agent处理很慢？
A: Agent需要调用DeepSeek API，处理时间取决于文本长度和API响应速度。请耐心等待。

### Q: 如何查看收藏的句子？
A: 在首页点击"📝 收藏的句子"链接，或直接访问 `/favorites/sentences`

### Q: 关键词提取后如何使用？
A: 关键词会自动保存，在后续使用"上下文理解"Agent时会自动使用这些关键词优化prompt。

### Q: 可以同时使用多个Agent吗？
A: 可以！在右侧面板可以依次点击多个Agent按钮，每个结果都会显示在下方。

---

## 提示

- **双击选词**：快速查询单词
- **拖拽选择**：选择长段落进行分析
- **编辑文本**：可以在右侧面板编辑选中的文本，然后使用Agent分析
- **收藏重要内容**：遇到重要的句子和解释，记得收藏
- **组合使用Agents**：先提取关键词，再使用上下文理解，效果更好

---

## API端点参考

### 新闻相关
- `GET /api/news/fetch?category=sports&count=10` - 获取新闻
- `POST /api/news/fetch-and-save` - 获取并保存新闻

### 文章相关
- `GET /api/articles` - 获取所有文章
- `GET /api/articles/:id` - 获取文章详情
- `POST /api/articles/:id/summary` - 总结文章
- `POST /api/articles/:id/keywords` - 提取关键词
- `POST /api/articles/:id/translate` - 翻译文本
- `POST /api/articles/:id/explain` - 解释文本

### 文本分析
- `POST /api/text/storyline` - 分析故事线
- `POST /api/text/sentiment` - 情感分析
- `POST /api/text/entities` - 提取实体
- `POST /api/text/context` - 上下文理解
- `POST /api/text/qa` - 问答

### 收藏相关
- `GET /api/favorites/sentences` - 获取收藏的句子
- `POST /api/favorites/sentences` - 收藏句子

### LangChain特性
- `POST /api/agents/process-with-chain/:id` - 链式处理
- `POST /api/agents/workflow/:id` - 工作流执行

---

祝使用愉快！🎉

